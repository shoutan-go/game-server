{"version":3,"sources":["/Users/lookis/Projects/game-server/webpack/bootstrap c4e5e411a77e7e91ad5c","/Users/lookis/Projects/game-server/external \"graphql\"","/Users/lookis/Projects/game-server/src/data/sequelize.js","/Users/lookis/Projects/game-server/external \"sequelize\"","/Users/lookis/Projects/game-server/src/data/models/index.js","/Users/lookis/Projects/game-server/src/config.js","/Users/lookis/Projects/game-server/external \"react\"","/Users/lookis/Projects/game-server/external \"node-fetch\"","/Users/lookis/Projects/game-server/src/redis.js","/Users/lookis/Projects/game-server/external \"prop-types\"","/Users/lookis/Projects/game-server/src/data/types/GoType.js","/Users/lookis/Projects/game-server/external \"react-apollo\"","/Users/lookis/Projects/game-server/external \"bluebird\"","/Users/lookis/Projects/game-server/external \"express\"","/Users/lookis/Projects/game-server/src/routes/error/ErrorPage.css","/Users/lookis/Projects/game-server/external \"querystring\"","/Users/lookis/Projects/game-server/external \"redux\"","/Users/lookis/Projects/game-server/src/constants/index.js","/Users/lookis/Projects/game-server/node_modules/css-loader/lib/css-base.js","/Users/lookis/Projects/game-server/node_modules/isomorphic-style-loader/lib/insertCss.js","/Users/lookis/Projects/game-server/external \"isomorphic-style-loader/lib/withStyles\"","/Users/lookis/Projects/game-server/external \"game-engine\"","/Users/lookis/Projects/game-server/external \"@babel/polyfill\"","/Users/lookis/Projects/game-server/src/server.js","/Users/lookis/Projects/game-server/external \"path\"","/Users/lookis/Projects/game-server/external \"express-session\"","/Users/lookis/Projects/game-server/external \"connect-redis\"","/Users/lookis/Projects/game-server/external \"express-ws\"","/Users/lookis/Projects/game-server/external \"cookie-parser\"","/Users/lookis/Projects/game-server/external \"body-parser\"","/Users/lookis/Projects/game-server/external \"express-jwt\"","/Users/lookis/Projects/game-server/external \"express-graphql\"","/Users/lookis/Projects/game-server/external \"jsonwebtoken\"","/Users/lookis/Projects/game-server/external \"react-dom/server\"","/Users/lookis/Projects/game-server/external \"pretty-error\"","/Users/lookis/Projects/game-server/external \"material-ui/styles/MuiThemeProvider\"","/Users/lookis/Projects/game-server/external \"material-ui/styles/getMuiTheme\"","/Users/lookis/Projects/game-server/external \"compression\"","/Users/lookis/Projects/game-server/src/core/createApolloClient/createApolloClient.server.js","/Users/lookis/Projects/game-server/external \"apollo-client\"","/Users/lookis/Projects/game-server/external \"apollo-link\"","/Users/lookis/Projects/game-server/external \"apollo-link-error\"","/Users/lookis/Projects/game-server/external \"apollo-link-schema\"","/Users/lookis/Projects/game-server/src/core/createApolloClient/createCache.js","/Users/lookis/Projects/game-server/external \"apollo-cache-inmemory\"","/Users/lookis/Projects/game-server/src/components/App.js","/Users/lookis/Projects/game-server/external \"react-redux\"","/Users/lookis/Projects/game-server/src/components/Html.js","/Users/lookis/Projects/game-server/external \"serialize-javascript\"","/Users/lookis/Projects/game-server/src/routes/error/ErrorPage.js","webpack:///./src/routes/error/ErrorPage.css?f0d0","/Users/lookis/Projects/game-server/external \"babel-runtime/core-js/json/stringify\"","/Users/lookis/Projects/game-server/external \"babel-runtime/helpers/slicedToArray\"","/Users/lookis/Projects/game-server/src/createFetch.js","/Users/lookis/Projects/game-server/src/connection.js","/Users/lookis/Projects/game-server/src/data/models/User.js","/Users/lookis/Projects/game-server/src/data/models/UserLogin.js","/Users/lookis/Projects/game-server/src/data/models/UserClaim.js","/Users/lookis/Projects/game-server/src/data/models/UserProfile.js","/Users/lookis/Projects/game-server/src/data/models/GoInfo.js","/Users/lookis/Projects/game-server/src/data/models/GoMove.js","/Users/lookis/Projects/game-server/src/data/models/MatchInfo.js","/Users/lookis/Projects/game-server/src/data/models/MatchGame.js","/Users/lookis/Projects/game-server/external \"redis\"","/Users/lookis/Projects/game-server/src/passport.js","/Users/lookis/Projects/game-server/external \"passport\"","/Users/lookis/Projects/game-server/external \"passport-wechat\"","/Users/lookis/Projects/game-server/src/router.js","/Users/lookis/Projects/game-server/external \"universal-router\"","/Users/lookis/Projects/game-server/src/routes/index.js","/Users/lookis/Projects/game-server/src/data/schema.js","/Users/lookis/Projects/game-server/src/data/queries/me.js","/Users/lookis/Projects/game-server/src/data/types/UserType.js","/Users/lookis/Projects/game-server/src/data/queries/news.js","/Users/lookis/Projects/game-server/src/data/types/NewsItemType.js","/Users/lookis/Projects/game-server/src/data/queries/go.js","/Users/lookis/Projects/game-server/src/data/queries/wechat.js","/Users/lookis/Projects/game-server/external \"crypto\"","/Users/lookis/Projects/game-server/src/data/types/WechatType.js","/Users/lookis/Projects/game-server/src/data/queries/match.js","/Users/lookis/Projects/game-server/src/data/types/GoMatch.js","/Users/lookis/Projects/game-server/src/data/mutations/create.js","/Users/lookis/Projects/game-server/src/data/mutations/createMatch.js","/Users/lookis/Projects/game-server/src/data/types/MatchType.js","/Users/lookis/Projects/game-server/src/data/mutations/update.js","/Users/lookis/Projects/game-server/external \"./assets.json\"","/Users/lookis/Projects/game-server/src/store/configureStore.js","/Users/lookis/Projects/game-server/src/reducers/index.js","/Users/lookis/Projects/game-server/src/reducers/user.js","/Users/lookis/Projects/game-server/src/reducers/runtime.js","/Users/lookis/Projects/game-server/src/store/logger/logger.server.js","/Users/lookis/Projects/game-server/external \"util\"","/Users/lookis/Projects/game-server/src/actions/runtime.js","/Users/lookis/Projects/game-server/external \"classnames/bind\"","/Users/lookis/Projects/game-server/external \"sweetalert2\"","/Users/lookis/Projects/game-server/external \"material-ui/SelectField\"","/Users/lookis/Projects/game-server/external \"material-ui/MenuItem\"","/Users/lookis/Projects/game-server/external \"material-ui/TextField\"","/Users/lookis/Projects/game-server/external \"material-ui/RaisedButton\"","/Users/lookis/Projects/game-server/external \"react-websocket\"","/Users/lookis/Projects/game-server/external \"react-rangeslider\""],"names":["sequelize","config","databaseUrl","define","freezeTableName","User","hasMany","foreignKey","as","onUpdate","onDelete","hasOne","sync","Error","module","exports","port","process","env","PORT","api","clientUrl","API_CLIENT_URL","serverUrl","API_SERVER_URL","DATABASE_URL","auth","jwt","secret","JWT_SECRET","gnugo","GNUGO","redis","REDIS","sessionSecret","SESSION_SECRET","wechat","appId","appSecret","bluebird","promisifyAll","RedisClient","prototype","Multi","client","createClient","subscriber","on","console","log","err","GoType","name","fields","id","type","engine","info","boardsize","black","GraphQLString","white","goal","GraphQLInt","SET_RUNTIME_VARIABLE","app","express","expressWs","global","navigator","userAgent","use","compression","static","path","resolve","__dirname","maxAge","__DEV__","cookieParser","bodyParser","urlencoded","extended","json","expressJwt","credentialsRequired","getToken","req","cookies","id_token","res","next","error","clearCookie","passport","initialize","enable","get","set","RedisStore","connectRedis","session","store","cookie","domain","resave","saveUninitialized","authenticate","failureRedirect","expiresIn","token","sign","user","httpOnly","redirect","graphqlMiddleware","expressGraphQL","schema","graphiql","rootValue","request","pretty","connection","css","Set","apolloClient","createApolloClient","fetch","createFetch","baseUrl","headers","initialState","configureStore","history","dispatch","setRuntimeVariable","value","Date","now","context","insertCss","styles","forEach","add","style","_getCss","storeSubscription","router","hostname","pathname","query","route","from","status","data","rootComponent","getMuiTheme","component","getDataFromTree","Promise","delay","ReactDOM","renderToString","children","cssText","join","scripts","assets","vendor","js","push","chunks","map","chunk","apiUrl","state","getState","apolloState","extract","html","renderToStaticMarkup","send","pe","skipNodeFiles","skipPackage","render","message","errorPageStyle","promise","models","catch","stack","then","listen","hot","accept","link","onError","graphQLErrors","networkError","locations","warn","cache","createCache","ssrMode","queryDeduplication","dataIdFromObject","obj","__typename","defaultDataIdFromObject","ContextType","PropTypes","func","isRequired","ReduxProvider","childContextTypes","object","App","props","React","PureComponent","Html","asset","startsWith","split","length","title","description","assetsMap","script","__html","serialize","analytics","googleTrackingId","Component","ErrorPage","withStyles","defaults","method","mode","credentials","Accept","Cookie","url","options","re","RegExp","channels","channel","chan","ws","Router","msg","JSON","parse","all","GoInfo","findOne","where","GoMove","move","moves","rule","GameEngine","color","Go","COLOR","BLACK","WHITE","result","position","Object","assign","update","publishAsync","stringify","code","winner","body","toSgf","text","r","match","save","splice","indexOf","unsubscribe","params","subscribe","findAll","$in","include","attributes","model","required","players","users","filter","e","u","plain","displayName","profile","picture","player","game","avatar","Model","DataType","UUID","defaultValue","UUIDV1","primaryKey","email","STRING","validate","isEmail","emailConfirmed","BOOLEAN","indexes","UserLogin","key","UserClaim","UserProfile","userId","gender","location","website","CHAR","allowNull","INTEGER","handicap","komi","defaultValu","TEXT","getDataValue","val","setDataValue","MatchInfo","expiredIn","MatchGame","serializeUser","done","deserializeUser","appID","callbackURL","scope","passReqToCallback","accessToken","refreshToken","loginName","claimType","unionid","openid","fooBar","userLogin","create","logins","claims","nickname","sex","headimgurl","resolveRoute","protected","querystring","load","action","default","undefined","routes","unshift","require","me","go","news","mutation","createGo","createGoMatch","updateGo","UserType","StringType","items","lastFetchTask","lastFetchTime","response","NewsItemType","author","pubDate","content","args","root","keys","includes","reduce","payload","algo","crypto","createHash","ordered","sort","stringA","unescape","digest","getAsync","ticket","errcode","setexAsync","expires_in","access_token","noncestr","Math","random","toString","timestamp","floor","getTime","signature","jsapi_ticket","nonceStr","errmsg","WechatType","group","having","literal","r1","createdAt","goId","GoMatch","createMatch","MatchType","goInfo","goMove","middleware","enhancer","createLogger","devToolsExtension","f","BROWSER","window","compose","applyMiddleware","rootReducer","createRootReducer","createStore","replaceReducer","combineReducers","runtime","inspectObject","inspect","colors","singleLine","str","replace","actionFormatters","APOLLO_QUERY_INIT","a","queryId","variables","queryString","APOLLO_QUERY_RESULT","APOLLO_QUERY_STOP","formattedPayload","actionFormatter"],"mappings":"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AoD,cAAc;;AAElE;AACA;;;;;;;;AC3EA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,sCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,0DAA0D,EAAE;AAC5D;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA,2CAA2C,YAAY,EAAE;AACzD;AACA;AACA;AACA;AACA;AACA,mFAAmF;AACnF;AACA;AACA;AACA;;AAEA;AACA,iBAAiB,mBAAmB;AACpC;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,+DAA+D;AAC/D;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;;AAEA,2B;;;;;;AC3HA,mE;;;;;;ACAA,wC;;;;;;;;;;;;;;ACAA,4C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA;;;;;;;;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;CACoC;;AACpC;AACA;AACA;AAEA,IAAMC,MAAM,+CAAAC,EAAZ;AACA,kDAAAC,CAAUF,GAAV,E,CACA;AACA;AACA;AACA;;AACAG,OAAOC,SAAP,GAAmBD,OAAOC,SAAP,IAAoB,EAAvC;AACAD,OAAOC,SAAP,CAAiBC,SAAjB,GAA6BF,OAAOC,SAAP,CAAiBC,SAAjB,IAA8B,KAA3D,C,CAEA;AACA;AACA;;AACAL,IAAIM,GAAJ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","file":"server.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded chunks\n \t// \"0\" means \"already loaded\"\n \tvar installedChunks = {\n \t\t9: 0\n \t};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\t// \"0\" is the signal for \"already loaded\"\n \t\tif(installedChunks[chunkId] !== 0) {\n \t\t\tvar chunk = require(\"./chunks/\" + ({\"0\":\"go\",\"1\":\"home\",\"2\":\"go-creation\",\"3\":\"go-creation-match\",\"4\":\"about\",\"5\":\"not-found\",\"6\":\"login\",\"7\":\"admin\",\"8\":\"match\"}[chunkId]||chunkId) + \".js\");\n \t\t\tvar moreModules = chunk.modules, chunkIds = chunk.ids;\n \t\t\tfor(var moduleId in moreModules) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t\tfor(var i = 0; i < chunkIds.length; i++)\n \t\t\t\tinstalledChunks[chunkIds[i]] = 0;\n \t\t}\n \t\treturn Promise.resolve();\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/assets/\";\n\n \t// uncatched error handler for webpack runtime\n \t__webpack_require__.oe = function(err) {\n \t\tprocess.nextTick(function() {\n \t\t\tthrow err; // catch this error by using System.import().catch()\n \t\t});\n \t};\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 21);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap c4e5e411a77e7e91ad5c","module.exports = require(\"graphql\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"graphql\"\n// module id = 0\n// module chunks = 9","/**\n * React Starter Kit (https://www.reactstarterkit.com/)\n *\n * Copyright © 2014-present Kriasoft, LLC. All rights reserved.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.txt file in the root directory of this source tree.\n */\n\nimport Sequelize from 'sequelize';\nimport config from '../config';\n\nconst sequelize = new Sequelize(config.databaseUrl, {\n  define: {\n    freezeTableName: true,\n  },\n});\n\nexport default sequelize;\n\n\n\n// WEBPACK FOOTER //\n// ./src/data/sequelize.js","module.exports = require(\"sequelize\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"sequelize\"\n// module id = 2\n// module chunks = 9","/**\n * React Starter Kit (https://www.reactstarterkit.com/)\n *\n * Copyright © 2014-present Kriasoft, LLC. All rights reserved.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.txt file in the root directory of this source tree.\n */\n\nimport sequelize from '../sequelize';\nimport User from './User';\nimport UserLogin from './UserLogin';\nimport UserClaim from './UserClaim';\nimport UserProfile from './UserProfile';\nimport GoInfo from './GoInfo';\nimport GoMove from './GoMove';\nimport MatchInfo from './MatchInfo';\nimport MatchGame from './MatchGame';\n\nUser.hasMany(UserLogin, {\n  foreignKey: 'userId',\n  as: 'logins',\n  onUpdate: 'cascade',\n  onDelete: 'cascade',\n});\n\nUser.hasMany(UserClaim, {\n  foreignKey: 'userId',\n  as: 'claims',\n  onUpdate: 'cascade',\n  onDelete: 'cascade',\n});\n\nUser.hasOne(UserProfile, {\n  foreignKey: 'userId',\n  as: 'profile',\n  onUpdate: 'cascade',\n  onDelete: 'cascade',\n});\n\nfunction sync(...args) {\n  return sequelize.sync(...args);\n}\n\nexport default { sync };\nexport {\n  User,\n  UserLogin,\n  UserClaim,\n  UserProfile,\n  GoInfo,\n  GoMove,\n  MatchInfo,\n  MatchGame,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/data/models/index.js","/**\n * React Starter Kit (https://www.reactstarterkit.com/)\n *\n * Copyright © 2014-present Kriasoft, LLC. All rights reserved.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.txt file in the root directory of this source tree.\n */\n\n/* eslint-disable max-len */\n\nif (process.env.BROWSER) {\n  throw new Error(\n    'Do not import `config.js` from inside the client-side code.',\n  );\n}\n\nmodule.exports = {\n  // Node.js app\n  port: process.env.PORT || 3000,\n\n  // API Gateway\n  api: {\n    // API URL to be used in the client-side code\n    clientUrl: process.env.API_CLIENT_URL || '',\n    // API URL to be used in the server-side code\n    serverUrl:\n      process.env.API_SERVER_URL ||\n      `http://localhost:${process.env.PORT || 3000}`,\n  },\n\n  // Database\n  databaseUrl: process.env.DATABASE_URL || 'sqlite:database.sqlite',\n\n  // Authentication\n  auth: {\n    jwt: { secret: process.env.JWT_SECRET || 'React Starter Kit!' },\n  },\n  // GNUGO\n  gnugo: process.env.GNUGO || 'http://127.0.0.1:5001/score/estimate',\n\n  // Redis\n  redis: process.env.REDIS || 'redis://localhost:6379',\n\n  sessionSecret: process.env.SESSION_SECRET || \"It's a secret\",\n\n  wechat: {\n    appId: 'wxc67a197c5c3f004e',\n    appSecret: '60e541fff59447a7267502f974cc262d',\n  },\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/config.js","module.exports = require(\"react\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react\"\n// module id = 5\n// module chunks = 9","module.exports = require(\"node-fetch\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"node-fetch\"\n// module id = 6\n// module chunks = 9","import bluebird from 'bluebird';\nimport redis from 'redis';\n\nimport config from './config';\n\nbluebird.promisifyAll(redis.RedisClient.prototype);\nbluebird.promisifyAll(redis.Multi.prototype);\n\nconst client = redis.createClient(config.redis);\nconst subscriber = redis.createClient(config.redis);\n\nclient.on('error', err => console.log(err)); // eslint-disable-line no-console\nsubscriber.on('error', err => console.log(err)); // eslint-disable-line no-console\n\nexport { client as redis, subscriber };\n\n\n\n// WEBPACK FOOTER //\n// ./src/redis.js","module.exports = require(\"prop-types\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"prop-types\"\n// module id = 8\n// module chunks = 9","import {\n  GraphQLInt,\n  GraphQLNonNull,\n  GraphQLObjectType,\n  GraphQLString,\n} from 'graphql';\n\nconst GoType = new GraphQLObjectType({\n  name: 'Go',\n  fields: {\n    id: {\n      type: new GraphQLNonNull(GraphQLString),\n    },\n    engine: {\n      type: new GraphQLNonNull(GraphQLString),\n    },\n    info: {\n      type: new GraphQLObjectType({\n        name: 'GoInfo',\n        fields: {\n          boardsize: {\n            type: new GraphQLNonNull(GraphQLInt),\n          },\n          black: {\n            type: GraphQLString,\n          },\n          white: {\n            type: GraphQLString,\n          },\n          goal: {\n            type: GraphQLInt,\n          },\n        },\n      }),\n    },\n  },\n});\n\nexport default GoType;\n\n\n\n// WEBPACK FOOTER //\n// ./src/data/types/GoType.js","module.exports = require(\"react-apollo\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react-apollo\"\n// module id = 10\n// module chunks = 9","module.exports = require(\"bluebird\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"bluebird\"\n// module id = 11\n// module chunks = 9","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 12\n// module chunks = 9","\n    var content = require(\"!!../../../node_modules/css-loader/index.js??ref--2-rules-2!../../../node_modules/postcss-loader/lib/index.js??ref--2-rules-3!./ErrorPage.css\");\n    var insertCss = require(\"!../../../node_modules/isomorphic-style-loader/lib/insertCss.js\");\n\n    if (typeof content === 'string') {\n      content = [[module.id, content, '']];\n    }\n\n    module.exports = content.locals || {};\n    module.exports._getContent = function() { return content; };\n    module.exports._getCss = function() { return content.toString(); };\n    module.exports._insertCss = function(options) { return insertCss(content, options) };\n    \n    // Hot Module Replacement\n    // https://webpack.github.io/docs/hot-module-replacement\n    // Only activated in browser context\n    if (module.hot && typeof window !== 'undefined' && window.document) {\n      var removeCss = function() {};\n      module.hot.accept(\"!!../../../node_modules/css-loader/index.js??ref--2-rules-2!../../../node_modules/postcss-loader/lib/index.js??ref--2-rules-3!./ErrorPage.css\", function() {\n        content = require(\"!!../../../node_modules/css-loader/index.js??ref--2-rules-2!../../../node_modules/postcss-loader/lib/index.js??ref--2-rules-3!./ErrorPage.css\");\n\n        if (typeof content === 'string') {\n          content = [[module.id, content, '']];\n        }\n\n        removeCss = insertCss(content, { replace: true });\n      });\n      module.hot.dispose(function() { removeCss(); });\n    }\n  \n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/routes/error/ErrorPage.css\n// module id = 13\n// module chunks = 9","module.exports = require(\"querystring\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"querystring\"\n// module id = 14\n// module chunks = 9","module.exports = require(\"redux\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"redux\"\n// module id = 15\n// module chunks = 9","/* eslint-disable import/prefer-default-export */\n\nexport const SET_RUNTIME_VARIABLE = 'SET_RUNTIME_VARIABLE';\n\n\n\n// WEBPACK FOOTER //\n// ./src/constants/index.js","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader/lib/css-base.js\n// module id = 17\n// module chunks = 9","'use strict';\n\nvar _stringify = require('babel-runtime/core-js/json/stringify');\n\nvar _stringify2 = _interopRequireDefault(_stringify);\n\nvar _slicedToArray2 = require('babel-runtime/helpers/slicedToArray');\n\nvar _slicedToArray3 = _interopRequireDefault(_slicedToArray2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Isomorphic CSS style loader for Webpack\n *\n * Copyright © 2015-present Kriasoft, LLC. All rights reserved.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.txt file in the root directory of this source tree.\n */\n\nvar prefix = 's';\nvar inserted = {};\n\n// Base64 encoding and decoding - The \"Unicode Problem\"\n// https://developer.mozilla.org/en-US/docs/Web/API/WindowBase64/Base64_encoding_and_decoding#The_Unicode_Problem\nfunction b64EncodeUnicode(str) {\n  return btoa(encodeURIComponent(str).replace(/%([0-9A-F]{2})/g, function (match, p1) {\n    return String.fromCharCode('0x' + p1);\n  }));\n}\n\n/**\n * Remove style/link elements for specified node IDs\n * if they are no longer referenced by UI components.\n */\nfunction removeCss(ids) {\n  ids.forEach(function (id) {\n    if (--inserted[id] <= 0) {\n      var elem = document.getElementById(prefix + id);\n      if (elem) {\n        elem.parentNode.removeChild(elem);\n      }\n    }\n  });\n}\n\n/**\n * Example:\n *   // Insert CSS styles object generated by `css-loader` into DOM\n *   var removeCss = insertCss([[1, 'body { color: red; }']]);\n *\n *   // Remove it from the DOM\n *   removeCss();\n */\nfunction insertCss(styles) {\n  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref$replace = _ref.replace,\n      replace = _ref$replace === undefined ? false : _ref$replace,\n      _ref$prepend = _ref.prepend,\n      prepend = _ref$prepend === undefined ? false : _ref$prepend;\n\n  var ids = [];\n  for (var i = 0; i < styles.length; i++) {\n    var _styles$i = (0, _slicedToArray3.default)(styles[i], 4),\n        moduleId = _styles$i[0],\n        css = _styles$i[1],\n        media = _styles$i[2],\n        sourceMap = _styles$i[3];\n\n    var id = moduleId + '-' + i;\n\n    ids.push(id);\n\n    if (inserted[id]) {\n      if (!replace) {\n        inserted[id]++;\n        continue;\n      }\n    }\n\n    inserted[id] = 1;\n\n    var elem = document.getElementById(prefix + id);\n    var create = false;\n\n    if (!elem) {\n      create = true;\n\n      elem = document.createElement('style');\n      elem.setAttribute('type', 'text/css');\n      elem.id = prefix + id;\n\n      if (media) {\n        elem.setAttribute('media', media);\n      }\n    }\n\n    var cssText = css;\n    if (sourceMap && typeof btoa === 'function') {\n      // skip IE9 and below, see http://caniuse.com/atob-btoa\n      cssText += '\\n/*# sourceMappingURL=data:application/json;base64,' + b64EncodeUnicode((0, _stringify2.default)(sourceMap)) + '*/';\n      cssText += '\\n/*# sourceURL=' + sourceMap.file + '?' + id + '*/';\n    }\n\n    if ('textContent' in elem) {\n      elem.textContent = cssText;\n    } else {\n      elem.styleSheet.cssText = cssText;\n    }\n\n    if (create) {\n      if (prepend) {\n        document.head.insertBefore(elem, document.head.childNodes[0]);\n      } else {\n        document.head.appendChild(elem);\n      }\n    }\n  }\n\n  return removeCss.bind(null, ids);\n}\n\nmodule.exports = insertCss;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/isomorphic-style-loader/lib/insertCss.js\n// module id = 18\n// module chunks = 9","module.exports = require(\"isomorphic-style-loader/lib/withStyles\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"isomorphic-style-loader/lib/withStyles\"\n// module id = 19\n// module chunks = 9","module.exports = require(\"game-engine\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"game-engine\"\n// module id = 20\n// module chunks = 9","module.exports = require(\"@babel/polyfill\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"@babel/polyfill\"\n// module id = 22\n// module chunks = 9","/**\n * React Starter Kit (https://www.reactstarterkit.com/)\n *\n * Copyright © 2014-present Kriasoft, LLC. All rights reserved.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.txt file in the root directory of this source tree.\n */\n\nimport path from 'path';\nimport Promise from 'bluebird';\nimport express from 'express';\nimport session from 'express-session';\nimport connectRedis from 'connect-redis';\nimport expressWs from 'express-ws';\nimport cookieParser from 'cookie-parser';\nimport bodyParser from 'body-parser';\nimport expressJwt, { UnauthorizedError as Jwt401Error } from 'express-jwt';\nimport expressGraphQL from 'express-graphql';\nimport jwt from 'jsonwebtoken';\nimport nodeFetch from 'node-fetch';\nimport React from 'react';\nimport ReactDOM from 'react-dom/server';\nimport { getDataFromTree } from 'react-apollo';\nimport PrettyError from 'pretty-error';\nimport MuiThemeProvider from 'material-ui/styles/MuiThemeProvider';\nimport getMuiTheme from 'material-ui/styles/getMuiTheme';\nimport compression from 'compression';\nimport createApolloClient from './core/createApolloClient';\nimport App from './components/App';\nimport Html from './components/Html';\nimport { ErrorPageWithoutStyle } from './routes/error/ErrorPage';\nimport errorPageStyle from './routes/error/ErrorPage.css';\nimport createFetch from './createFetch';\nimport connection from './connection';\nimport passport from './passport';\nimport router from './router';\nimport { redis } from './redis';\nimport models from './data/models';\nimport schema from './data/schema';\nimport assets from './assets.json'; // eslint-disable-line import/no-unresolved\nimport configureStore from './store/configureStore';\nimport { setRuntimeVariable } from './actions/runtime';\nimport config from './config';\n\nconst app = express();\nexpressWs(app);\n//\n// Tell any CSS tooling (such as Material UI) to use all vendor prefixes if the\n// user agent is not known.\n// -----------------------------------------------------------------------------\nglobal.navigator = global.navigator || {};\nglobal.navigator.userAgent = global.navigator.userAgent || 'all';\n\n//\n// Register Node.js middleware\n// -----------------------------------------------------------------------------\napp.use(compression());\napp.use(\n  express.static(path.resolve(__dirname, 'public'), {\n    maxAge: __DEV__ ? 0 : '1y',\n  }),\n);\napp.use(cookieParser());\napp.use(bodyParser.urlencoded({ extended: true }));\napp.use(bodyParser.json());\n//\n// Authentication\n// -----------------------------------------------------------------------------\napp.use(\n  expressJwt({\n    secret: config.auth.jwt.secret,\n    credentialsRequired: false,\n    getToken: req => req.cookies.id_token,\n  }),\n);\n// Error handler for express-jwt\napp.use((err, req, res, next) => {\n  // eslint-disable-line no-unused-vars\n  if (err instanceof Jwt401Error) {\n    console.error('[express-jwt-error]', req.cookies.id_token);\n    // `clearCookie`, otherwise user can't use web-app until cookie expires\n    res.clearCookie('id_token');\n  }\n  next(err);\n});\n\napp.use(passport.initialize());\n\nif (__DEV__) {\n  app.enable('trust proxy');\n}\nif (app.get('env') === 'production') {\n  app.set('trust proxy', 1); // trust first proxy\n}\nconst RedisStore = connectRedis(session);\napp.use(\n  session({\n    store: new RedisStore({\n      client: redis,\n    }),\n    secret: config.sessionSecret,\n    cookie: {\n      domain: '.shoutanwq.com',\n    },\n    resave: false,\n    saveUninitialized: true,\n  }),\n);\n\napp.get(\n  '/login/wechat',\n  (req, res, next) => {\n    next();\n  },\n  passport.authenticate('wechat'),\n);\n\napp.get(\n  '/login/wechat/return',\n  passport.authenticate('wechat', {\n    session: false,\n    failureRedirect: '/login/wechat',\n  }),\n  (req, res) => {\n    const expiresIn = 60 * 60 * 24 * 180; // 180 days\n    const token = jwt.sign(req.user, config.auth.jwt.secret, { expiresIn });\n    res.cookie('id_token', token, { maxAge: 1000 * expiresIn, httpOnly: true });\n    res.redirect(req.session.next || '/');\n  },\n);\n\n//\n// Register API middleware\n// -----------------------------------------------------------------------------\nconst graphqlMiddleware = expressGraphQL(req => ({\n  schema,\n  graphiql: __DEV__,\n  rootValue: { request: req },\n  pretty: __DEV__,\n}));\n\napp.use('/graphql', graphqlMiddleware);\napp.use(connection());\n\n//\n// Register server-side rendering middleware\n// -----------------------------------------------------------------------------\napp.get('*', async (req, res, next) => {\n  try {\n    const css = new Set();\n\n    const apolloClient = createApolloClient({\n      schema,\n      rootValue: { request: req },\n    });\n\n    // Universal HTTP client\n    const fetch = createFetch(nodeFetch, {\n      baseUrl: config.api.serverUrl,\n      cookie: req.headers.cookie,\n      apolloClient,\n    });\n\n    const initialState = {\n      user: req.user || null,\n    };\n\n    const store = configureStore(initialState, {\n      cookie: req.headers.cookie,\n      fetch,\n      // I should not use `history` on server.. but how I do redirection? follow universal-router\n      history: null,\n    });\n\n    store.dispatch(\n      setRuntimeVariable({\n        name: 'initialNow',\n        value: Date.now(),\n      }),\n    );\n\n    // Global (context) variables that can be easily accessed from any React component\n    // https://facebook.github.io/react/docs/context.html\n    const context = {\n      // Enables critical path CSS rendering\n      // https://github.com/kriasoft/isomorphic-style-loader\n      insertCss: (...styles) => {\n        // eslint-disable-next-line no-underscore-dangle\n        styles.forEach(style => css.add(style._getCss()));\n      },\n      fetch,\n      // You can access redux through react-redux connect\n      store,\n      storeSubscription: null,\n      // Apollo Client for use with react-apollo\n      client: apolloClient,\n    };\n    const route = await router.resolve({\n      ...context,\n      hostname: req.hostname,\n      pathname: req.path,\n      query: req.query,\n    });\n\n    if (route.redirect) {\n      if (route.from) {\n        req.session.next = route.from;\n      }\n      res.redirect(route.status || 302, route.redirect);\n      return;\n    }\n\n    const data = { ...route };\n    const rootComponent = (\n      <MuiThemeProvider\n        muiTheme={getMuiTheme({\n          userAgent: req.headers['user-agent'],\n        })}\n      >\n        <App\n          context={context}\n          store={store}\n          userAgent={req.headers['user-agent']}\n        >\n          {route.component}\n        </App>\n      </MuiThemeProvider>\n    );\n    await getDataFromTree(rootComponent);\n    // this is here because of Apollo redux APOLLO_QUERY_STOP action\n    await Promise.delay(0);\n    data.children = await ReactDOM.renderToString(rootComponent);\n    data.styles = [{ id: 'css', cssText: [...css].join('') }];\n\n    data.scripts = [assets.vendor.js];\n    data.scripts.push('//res.wx.qq.com/open/js/jweixin-1.2.0.js');\n    if (route.chunks) {\n      data.scripts.push(...route.chunks.map(chunk => assets[chunk].js));\n    }\n    data.scripts.push(assets.client.js);\n\n    // Furthermore invoked actions will be ignored, client will not receive them!\n    if (__DEV__) {\n      // eslint-disable-next-line no-console\n      console.log('Serializing store...');\n    }\n    data.app = {\n      apiUrl: config.api.clientUrl,\n      state: context.store.getState(),\n      apolloState: context.client.extract(),\n    };\n    data.hostname = req.hostname;\n\n    const html = ReactDOM.renderToStaticMarkup(<Html {...data} />);\n    res.status(route.status || 200);\n    res.send(`<!doctype html>${html}`);\n  } catch (err) {\n    next(err);\n  }\n});\n\n//\n// Error handling\n// -----------------------------------------------------------------------------\nconst pe = new PrettyError();\npe.skipNodeFiles();\npe.skipPackage('express');\n\n// eslint-disable-next-line no-unused-vars\napp.use((err, req, res, next) => {\n  console.error(pe.render(err));\n  const html = ReactDOM.renderToStaticMarkup(\n    <Html\n      title=\"Internal Server Error\"\n      description={err.message}\n      styles={[{ id: 'css', cssText: errorPageStyle._getCss() }]} // eslint-disable-line no-underscore-dangle\n    >\n      {ReactDOM.renderToString(<ErrorPageWithoutStyle error={err} />)}\n    </Html>,\n  );\n  res.status(err.status || 500);\n  res.send(`<!doctype html>${html}`);\n});\n\n//\n// Launch the server\n// -----------------------------------------------------------------------------\nconst promise = models.sync().catch(err => console.error(err.stack));\nif (!module.hot) {\n  promise.then(() => {\n    app.listen(config.port, () => {\n      console.info(`The server is running at http://localhost:${config.port}/`);\n    });\n  });\n}\n\n//\n// Hot Module Replacement\n// -----------------------------------------------------------------------------\nif (module.hot) {\n  app.hot = module.hot;\n  module.hot.accept('./router');\n}\n\nexport default app;\n\n\n\n// WEBPACK FOOTER //\n// ./src/server.js","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 24\n// module chunks = 9","module.exports = require(\"express-session\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express-session\"\n// module id = 25\n// module chunks = 9","module.exports = require(\"connect-redis\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"connect-redis\"\n// module id = 26\n// module chunks = 9","module.exports = require(\"express-ws\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express-ws\"\n// module id = 27\n// module chunks = 9","module.exports = require(\"cookie-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"cookie-parser\"\n// module id = 28\n// module chunks = 9","module.exports = require(\"body-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"body-parser\"\n// module id = 29\n// module chunks = 9","module.exports = require(\"express-jwt\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express-jwt\"\n// module id = 30\n// module chunks = 9","module.exports = require(\"express-graphql\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express-graphql\"\n// module id = 31\n// module chunks = 9","module.exports = require(\"jsonwebtoken\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jsonwebtoken\"\n// module id = 32\n// module chunks = 9","module.exports = require(\"react-dom/server\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react-dom/server\"\n// module id = 33\n// module chunks = 9","module.exports = require(\"pretty-error\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"pretty-error\"\n// module id = 34\n// module chunks = 9","module.exports = require(\"material-ui/styles/MuiThemeProvider\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"material-ui/styles/MuiThemeProvider\"\n// module id = 35\n// module chunks = 9","module.exports = require(\"material-ui/styles/getMuiTheme\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"material-ui/styles/getMuiTheme\"\n// module id = 36\n// module chunks = 9","module.exports = require(\"compression\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"compression\"\n// module id = 37\n// module chunks = 9","// @flow\n\nimport { ApolloClient } from 'apollo-client';\nimport { from } from 'apollo-link';\nimport { onError } from 'apollo-link-error';\nimport { SchemaLink } from 'apollo-link-schema';\nimport createCache from './createCache';\n\nexport default function createApolloClient(schema) {\n  const link = from([\n    onError(({ graphQLErrors, networkError }) => {\n      if (graphQLErrors)\n        graphQLErrors.map(({ message, locations, path }) =>\n          console.warn(\n            `[GraphQL error]: Message: ${message}, Location: ${locations}, Path: ${path}`,\n          ),\n        );\n      if (networkError) console.warn(`[Network error]: ${networkError}`);\n    }),\n    new SchemaLink({ ...schema }),\n  ]);\n\n  return new ApolloClient({\n    link,\n    cache: createCache(),\n    ssrMode: true,\n    queryDeduplication: true,\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/createApolloClient/createApolloClient.server.js","module.exports = require(\"apollo-client\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"apollo-client\"\n// module id = 39\n// module chunks = 9","module.exports = require(\"apollo-link\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"apollo-link\"\n// module id = 40\n// module chunks = 9","module.exports = require(\"apollo-link-error\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"apollo-link-error\"\n// module id = 41\n// module chunks = 9","module.exports = require(\"apollo-link-schema\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"apollo-link-schema\"\n// module id = 42\n// module chunks = 9","// @flow\n\nimport { InMemoryCache, defaultDataIdFromObject } from 'apollo-cache-inmemory';\n\nfunction dataIdFromObject(obj) {\n  switch (obj.__typename) {\n    case 'NewsItem':\n      return obj.link ? `NewsItem:${obj.link}` : defaultDataIdFromObject(obj);\n    default:\n      return defaultDataIdFromObject(obj);\n  }\n}\n\nexport default function createCache() {\n  // https://www.apollographql.com/docs/react/basics/caching.html#configuration\n  return new InMemoryCache({\n    dataIdFromObject,\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/createApolloClient/createCache.js","module.exports = require(\"apollo-cache-inmemory\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"apollo-cache-inmemory\"\n// module id = 44\n// module chunks = 9","/**\n * React Starter Kit (https://www.reactstarterkit.com/)\n *\n * Copyright © 2014-present Kriasoft, LLC. All rights reserved.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.txt file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { Provider as ReduxProvider } from 'react-redux';\nimport { ApolloProvider } from 'react-apollo';\n\nconst ContextType = {\n  // Enables critical path CSS rendering\n  // https://github.com/kriasoft/isomorphic-style-loader\n  insertCss: PropTypes.func.isRequired,\n  // Universal HTTP client\n  fetch: PropTypes.func.isRequired,\n  // Integrate Redux\n  // http://redux.js.org/docs/basics/UsageWithReact.html\n  ...ReduxProvider.childContextTypes,\n  // Apollo Client\n  client: PropTypes.object.isRequired,\n};\n\n/**\n * The top-level React component setting context (global) variables\n * that can be accessed from all the child components.\n *\n * https://facebook.github.io/react/docs/context.html\n *\n * Usage example:\n *\n *   const context = {\n *     history: createBrowserHistory(),\n *     store: createStore(),\n *   };\n *\n *   ReactDOM.render(\n *     <App context={context}>\n *       <Layout>\n *         <LandingPage />\n *       </Layout>\n *     </App>,\n *     container,\n *   );\n */\nclass App extends React.PureComponent {\n  static propTypes = {\n    context: PropTypes.shape(ContextType).isRequired,\n    children: PropTypes.element.isRequired,\n  };\n\n  static childContextTypes = ContextType;\n\n  getChildContext() {\n    return this.props.context;\n  }\n\n  render() {\n    // Here, we are at universe level, sure? ;-)\n    const { client } = this.props.context;\n    // NOTE: If you need to add or modify header, footer etc. of the app,\n    // please do that inside the Layout component.\n    return (\n      <ApolloProvider client={client}>{this.props.children}</ApolloProvider>\n    );\n  }\n}\n\nexport default App;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/App.js","module.exports = require(\"react-redux\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react-redux\"\n// module id = 46\n// module chunks = 9","/**\n * React Starter Kit (https://www.reactstarterkit.com/)\n *\n * Copyright © 2014-present Kriasoft, LLC. All rights reserved.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.txt file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport serialize from 'serialize-javascript';\nimport config from '../config';\n\n/* eslint-disable react/no-danger */\n\nclass Html extends React.Component {\n  static propTypes = {\n    title: PropTypes.string.isRequired,\n    description: PropTypes.string.isRequired,\n    styles: PropTypes.arrayOf(\n      PropTypes.shape({\n        id: PropTypes.string.isRequired,\n        cssText: PropTypes.string.isRequired,\n      }).isRequired,\n    ),\n    scripts: PropTypes.arrayOf(PropTypes.string.isRequired),\n    app: PropTypes.object, // eslint-disable-line\n    children: PropTypes.string.isRequired,\n    hostname: PropTypes.string,\n  };\n\n  static defaultProps = {\n    styles: [],\n    scripts: [],\n    hostname: null,\n  };\n\n  assetsMap(asset) {\n    if (asset.startsWith('/assets/') && this.props.hostname) {\n      const domain = this.props.hostname.split('.');\n      if (domain[domain.length - 2]) {\n        return `//assets.${domain[domain.length - 2]}.${\n          domain[domain.length - 1]\n        }${asset}`;\n      }\n      return `//assets.${domain[domain.length - 1]}${asset}`;\n    }\n    return asset;\n  }\n\n  render() {\n    const { title, description, styles, scripts, app, children } = this.props;\n    return (\n      <html className=\"no-js\" lang=\"en\">\n        <head>\n          <meta charSet=\"utf-8\" />\n          <meta httpEquiv=\"x-ua-compatible\" content=\"ie=edge\" />\n          <title>{title}</title>\n          <meta name=\"description\" content={description} />\n          <meta\n            name=\"viewport\"\n            content=\"width=device-width, initial-scale = 1.0, maximum-scale=1.0, user-scalable=no\"\n          />\n          <meta name=\"apple-mobile-web-app-capable\" content=\"yes\" />\n          {scripts.map(script => (\n            <link\n              key={script}\n              rel=\"preload\"\n              href={this.assetsMap(script)}\n              as=\"script\"\n            />\n          ))}\n          <link rel=\"apple-touch-icon\" href=\"apple-touch-icon.png\" />\n          {styles.map(style => (\n            <style\n              key={style.id}\n              id={style.id}\n              dangerouslySetInnerHTML={{ __html: style.cssText }}\n            />\n          ))}\n        </head>\n        <body>\n          <div id=\"app\" dangerouslySetInnerHTML={{ __html: children }} />\n          <script\n            dangerouslySetInnerHTML={{ __html: `window.App=${serialize(app)}` }}\n          />\n          {scripts.map(script => (\n            <script key={script} src={this.assetsMap(script)} />\n          ))}\n          {config.analytics &&\n            config.analytics.googleTrackingId && (\n              <script\n                dangerouslySetInnerHTML={{\n                  __html:\n                    'window.ga=function(){ga.q.push(arguments)};ga.q=[];ga.l=+new Date;' +\n                    `ga('create','${\n                      config.analytics.googleTrackingId\n                    }','auto');ga('send','pageview')`,\n                }}\n              />\n            )}\n          {config.analytics &&\n            config.analytics.googleTrackingId && (\n              <script\n                src=\"https://www.google-analytics.com/analytics.js\"\n                async\n                defer\n              />\n            )}\n        </body>\n      </html>\n    );\n  }\n}\n\nexport default Html;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/Html.js","module.exports = require(\"serialize-javascript\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"serialize-javascript\"\n// module id = 48\n// module chunks = 9","/**\n * React Starter Kit (https://www.reactstarterkit.com/)\n *\n * Copyright © 2014-present Kriasoft, LLC. All rights reserved.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.txt file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport withStyles from 'isomorphic-style-loader/lib/withStyles';\nimport s from './ErrorPage.css';\n\nclass ErrorPage extends React.Component {\n  static propTypes = {\n    error: PropTypes.shape({\n      name: PropTypes.string.isRequired,\n      message: PropTypes.string.isRequired,\n      stack: PropTypes.string.isRequired,\n    }),\n  };\n\n  static defaultProps = {\n    error: null,\n  };\n\n  render() {\n    if (__DEV__ && this.props.error) {\n      return (\n        <div>\n          <h1>{this.props.error.name}</h1>\n          <pre>{this.props.error.stack}</pre>\n        </div>\n      );\n    }\n\n    return (\n      <div>\n        <h1>Error</h1>\n        <p>Sorry, a critical error occurred on this page.</p>\n      </div>\n    );\n  }\n}\n\nexport { ErrorPage as ErrorPageWithoutStyle };\nexport default withStyles(s)(ErrorPage);\n\n\n\n// WEBPACK FOOTER //\n// ./src/routes/error/ErrorPage.js","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"html{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;padding:0 32px;padding:0 2rem;height:100%;font-family:sans-serif;text-align:center;color:#888}body{margin:0}h1{font-weight:400;color:#555}pre{white-space:pre-wrap;text-align:left}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?{\"importLoaders\":1,\"sourceMap\":false,\"modules\":true,\"localIdentName\":\"[hash:base64:5]\",\"minimize\":{\"discardComments\":{\"removeAll\":true}}}!./node_modules/postcss-loader/lib?{\"config\":{\"path\":\"./tools/postcss.config.js\"}}!./src/routes/error/ErrorPage.css\n// module id = 50\n// module chunks = 9","module.exports = require(\"babel-runtime/core-js/json/stringify\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/core-js/json/stringify\"\n// module id = 51\n// module chunks = 9","module.exports = require(\"babel-runtime/helpers/slicedToArray\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/helpers/slicedToArray\"\n// module id = 52\n// module chunks = 9","/**\n * React Starter Kit (https://www.reactstarterkit.com/)\n *\n * Copyright © 2014-present Kriasoft, LLC. All rights reserved.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.txt file in the root directory of this source tree.\n */\n\n/* @flow */\n\ntype Fetch = (url: string, options: ?any) => Promise<any>;\n\ntype Options = {\n  baseUrl: string,\n  cookie?: string,\n};\n\n/**\n * Creates a wrapper function around the HTML5 Fetch API that provides\n * default arguments to fetch(...) and is intended to reduce the amount\n * of boilerplate code in the application.\n * https://developer.mozilla.org/docs/Web/API/Fetch_API/Using_Fetch\n */\nfunction createFetch(fetch: Fetch, { baseUrl, cookie }: Options) {\n  // NOTE: Tweak the default options to suite your application needs\n  const defaults = {\n    method: 'POST', // handy with GraphQL backends\n    mode: baseUrl ? 'cors' : 'same-origin',\n    credentials: baseUrl ? 'include' : 'same-origin',\n    headers: {\n      Accept: 'application/json',\n      'Content-Type': 'application/json',\n      ...(cookie ? { Cookie: cookie } : null),\n    },\n  };\n\n  return (url: string, options: any) =>\n    url.startsWith('/graphql') || url.startsWith('/api')\n      ? fetch(`${baseUrl}${url}`, {\n          ...defaults,\n          ...options,\n          headers: {\n            ...defaults.headers,\n            ...(options && options.headers),\n          },\n        })\n      : fetch(url, options);\n}\n\nexport default createFetch;\n\n\n\n// WEBPACK FOOTER //\n// ./src/createFetch.js","import express from 'express';\nimport GameEngine from 'game-engine';\nimport fetch from 'node-fetch';\nimport config from './config';\nimport { User, UserProfile, GoInfo, GoMove } from './data/models';\n\nimport { redis, subscriber } from './redis';\n\nconst re = new RegExp('^(B|W)[a-z]* wins by ([\\\\d\\\\.]+) points');\n\nconst channels = {};\n\nsubscriber.on('message', (channel, message) => {\n  const chan = channel.split(':')[1];\n  channels[chan].forEach(ws => {\n    ws.send(message);\n  });\n});\n\nexport default function() {\n  const router = express.Router();\n  router.ws('/channel/:channel', (ws, req) => {\n    ws.on('message', data => {\n      const msg = JSON.parse(data);\n      Promise.all([\n        GoInfo.findOne({\n          where: {\n            id: ws.channel,\n          },\n        }),\n        GoMove.findOne({\n          where: {\n            id: ws.channel,\n          },\n        }).then(move => move.move),\n      ]).then(([info, moves]) => {\n        const { rule } = info;\n        const engine = new GameEngine[rule](info, moves);\n        let color;\n        if (info.black === req.user.id) {\n          color = GameEngine.Go.COLOR.BLACK;\n        } else if (info.white === req.user.id) {\n          color = GameEngine.Go.COLOR.WHITE;\n        }\n        if (!color) {\n          return;\n        }\n        const result = engine[msg.type](\n          color,\n          msg.position && msg.position[0],\n          msg.position && msg.position[1],\n        );\n        if (\n          typeof result === 'number' ||\n          (typeof result === 'boolean' && result)\n        ) {\n          moves.push(Object.assign({ color }, msg));\n          GoMove.update(\n            {\n              move: moves,\n            },\n            {\n              where: {\n                id: ws.channel,\n              },\n            },\n          )\n            .then(() =>\n              redis.publishAsync(\n                `channel:${ws.channel}`,\n                JSON.stringify({\n                  code: 'ok',\n                  type: 'delta',\n                  move: Object.assign({ color }, msg),\n                }),\n              ),\n            )\n            .then(() => {\n              if (engine.winner() === 'estimate') {\n                fetch(config.gnugo, {\n                  method: 'POST',\n                  body: engine.toSgf(),\n                })\n                  .then(res => res.text())\n                  .then(text => {\n                    const r = text.match(re);\n                    if (r) {\n                      info.result = `${r[1]}+${r[2]}`;\n                      info.save().then(() => {\n                        redis.publishAsync(\n                          `channel:${ws.channel}`,\n                          JSON.stringify({\n                            code: 'ok',\n                            type: 'result',\n                            result: `${r[1]}+${r[2]}`,\n                          }),\n                        );\n                      });\n                    }\n                  });\n              } else if (engine.winner()) {\n                const winner = engine.winner();\n                info.result = `${\n                  winner === GameEngine.Go.COLOR.BLACK ? 'B+R' : 'W+R'\n                }`;\n                info.save().then(() => {\n                  redis.publishAsync(\n                    `channel:${ws.channel}`,\n                    JSON.stringify({\n                      code: 'ok',\n                      type: 'result',\n                      result: `${\n                        winner === GameEngine.Go.COLOR.BLACK ? 'B+R' : 'W+R'\n                      }`,\n                    }),\n                  );\n                });\n              }\n            });\n        }\n      });\n    });\n\n    ws.on('close', () => {\n      if (ws.channel) {\n        const channel = channels[ws.channel];\n        channel.splice(channel.indexOf(ws), 1);\n        if (channel.length === 0) {\n          delete channels[ws.channel];\n          subscriber.unsubscribe(`channel:${ws.channel}`);\n        }\n        // eslint-disable-next-line no-param-reassign\n        delete ws.channel;\n      }\n    });\n\n    (() => {\n      // quit prev channel\n      if (!channels[req.params.channel]) {\n        subscriber.subscribe(`channel:${req.params.channel}`);\n        channels[req.params.channel] = [];\n      }\n      if (ws.channel) {\n        const channel = channels[ws.channel];\n        channel.splice(channel.indexOf(ws), 1);\n      }\n      // subscribe to new channel\n      channels[req.params.channel].push(ws);\n      // eslint-disable-next-line no-param-reassign\n      ws.channel = req.params.channel;\n      // send new game info\n      Promise.all([\n        GoInfo.findOne({\n          where: {\n            id: ws.channel,\n          },\n        }),\n        GoMove.findOne({\n          where: {\n            id: ws.channel,\n          },\n        }).then(move => move.move),\n      ]).then(([info, moves]) => {\n        const engine = info.rule;\n        User.findAll({\n          where: { id: { $in: [info.black, info.white] } },\n          include: [\n            {\n              attributes: ['displayName', 'picture'],\n              model: UserProfile,\n              as: 'profile',\n              required: true,\n            },\n          ],\n        }).then(users => {\n          const players = users.filter(e => e).map(user => {\n            const u = user.get({ plain: true });\n            return {\n              id: u.id,\n              displayName: u.profile.displayName,\n              picture: u.profile.picture,\n            };\n          });\n          let profile = {};\n          // eslint-disable-next-line no-restricted-syntax\n          for (const player of players) {\n            profile = Object.assign(profile, {\n              [player.id]: player,\n            });\n          }\n          ws.send(\n            JSON.stringify({\n              code: 'ok',\n              type: 'init',\n              game: {\n                engine,\n                moves,\n                info: {\n                  result: info.result,\n                  boardsize: info.boardsize,\n                  black: {\n                    id: info.black,\n                    name: profile[info.black]\n                      ? profile[info.black].displayName\n                      : '[黑棋]',\n                    avatar: profile[info.black]\n                      ? profile[info.black].picture\n                      : 'http://wx.qlogo.cn/mmopen/jj4e65x0Px2ibxI8cBsLdxueOibCLrqHvg9U91Dvk0ohjQHgO2dias3LiaHazszmh0CJX4xhknnfwibqwDwWfCBaVPslgIcyBG81A/64',\n                  },\n                  white: {\n                    id: info.white,\n                    name: profile[info.white]\n                      ? profile[info.white].displayName\n                      : '[白棋]',\n                    avatar: profile[info.white]\n                      ? profile[info.white].picture\n                      : 'http://wx.qlogo.cn/mmopen/jj4e65x0Px2ibxI8cBsLdxueOibCLrqHvg9U91Dvk0ohjQHgO2dias3LiaHazszmh0CJX4xhknnfwibqwDwWfCBaVPslgIcyBG81A/64',\n                  },\n                  goal: info.goal,\n                },\n              },\n            }),\n          );\n        });\n      });\n    })();\n  });\n  return router;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/connection.js","/**\n * React Starter Kit (https://www.reactstarterkit.com/)\n *\n * Copyright © 2014-present Kriasoft, LLC. All rights reserved.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.txt file in the root directory of this source tree.\n */\n\nimport DataType from 'sequelize';\nimport Model from '../sequelize';\n\nconst User = Model.define(\n  'User',\n  {\n    id: {\n      type: DataType.UUID,\n      defaultValue: DataType.UUIDV1,\n      primaryKey: true,\n    },\n\n    email: {\n      type: DataType.STRING(255),\n      validate: { isEmail: true },\n    },\n\n    emailConfirmed: {\n      type: DataType.BOOLEAN,\n      defaultValue: false,\n    },\n  },\n  {\n    indexes: [{ fields: ['email'] }],\n  },\n);\n\nexport default User;\n\n\n\n// WEBPACK FOOTER //\n// ./src/data/models/User.js","/**\n * React Starter Kit (https://www.reactstarterkit.com/)\n *\n * Copyright © 2014-present Kriasoft, LLC. All rights reserved.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.txt file in the root directory of this source tree.\n */\n\nimport DataType from 'sequelize';\nimport Model from '../sequelize';\n\nconst UserLogin = Model.define('UserLogin', {\n  name: {\n    type: DataType.STRING(50),\n    primaryKey: true,\n  },\n\n  key: {\n    type: DataType.STRING(100),\n    primaryKey: true,\n  },\n});\n\nexport default UserLogin;\n\n\n\n// WEBPACK FOOTER //\n// ./src/data/models/UserLogin.js","/**\n * React Starter Kit (https://www.reactstarterkit.com/)\n *\n * Copyright © 2014-present Kriasoft, LLC. All rights reserved.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.txt file in the root directory of this source tree.\n */\n\nimport DataType from 'sequelize';\nimport Model from '../sequelize';\n\nconst UserClaim = Model.define('UserClaim', {\n  type: {\n    type: DataType.STRING,\n  },\n\n  value: {\n    type: DataType.STRING,\n  },\n});\n\nexport default UserClaim;\n\n\n\n// WEBPACK FOOTER //\n// ./src/data/models/UserClaim.js","/**\n * React Starter Kit (https://www.reactstarterkit.com/)\n *\n * Copyright © 2014-present Kriasoft, LLC. All rights reserved.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.txt file in the root directory of this source tree.\n */\n\nimport DataType from 'sequelize';\nimport Model from '../sequelize';\n\nconst UserProfile = Model.define('UserProfile', {\n  userId: {\n    type: DataType.UUID,\n    primaryKey: true,\n  },\n\n  displayName: {\n    type: DataType.STRING(100),\n  },\n\n  picture: {\n    type: DataType.STRING(255),\n  },\n\n  gender: {\n    type: DataType.STRING(50),\n  },\n\n  location: {\n    type: DataType.STRING(100),\n  },\n\n  website: {\n    type: DataType.STRING(255),\n  },\n});\n\nexport default UserProfile;\n\n\n\n// WEBPACK FOOTER //\n// ./src/data/models/UserProfile.js","import DataType from 'sequelize';\nimport Model from '../sequelize';\n\nconst GoInfo = Model.define('GoInfo', {\n  id: {\n    type: DataType.CHAR(128),\n    primaryKey: true,\n  },\n  rule: {\n    type: DataType.CHAR,\n    allowNull: false,\n  },\n  boardsize: {\n    type: DataType.INTEGER,\n    allowNull: false,\n  },\n  handicap: {\n    type: DataType.INTEGER,\n    defaultValue: 0,\n  },\n  komi: {\n    type: DataType.STRING,\n    defaultValu: '6.5',\n    allowNull: false,\n  },\n  black: {\n    type: DataType.UUID,\n  },\n  white: {\n    type: DataType.UUID,\n  },\n  result: {\n    type: DataType.STRING,\n  },\n  goal: {\n    type: DataType.INTEGER,\n  },\n});\n\nexport default GoInfo;\n\n\n\n// WEBPACK FOOTER //\n// ./src/data/models/GoInfo.js","import DataType from 'sequelize';\nimport Model from '../sequelize';\n\nconst GoMove = Model.define('GoMove', {\n  id: {\n    type: DataType.CHAR(128),\n    primaryKey: true,\n  },\n  move: {\n    type: DataType.TEXT,\n    defaultValue: '[]',\n    get() {\n      return JSON.parse(this.getDataValue('move'));\n    },\n    set(val) {\n      return this.setDataValue('move', JSON.stringify(val));\n    },\n  },\n});\n\nexport default GoMove;\n\n\n\n// WEBPACK FOOTER //\n// ./src/data/models/GoMove.js","import DataType from 'sequelize';\nimport Model from '../sequelize';\n\nconst MatchInfo = Model.define('MatchInfo', {\n  id: {\n    type: DataType.UUID,\n    defaultValue: DataType.UUIDV1,\n    primaryKey: true,\n  },\n  rule: {\n    type: DataType.CHAR,\n    allowNull: false,\n  },\n  boardsize: {\n    type: DataType.INTEGER,\n    allowNull: false,\n  },\n  handicap: {\n    type: DataType.INTEGER,\n    defaultValue: 0,\n  },\n  komi: {\n    type: DataType.STRING,\n    defaultValu: '6.5',\n    allowNull: false,\n  },\n  expiredIn: {\n    type: DataType.INTEGER,\n    defaultValue: 10 * 60,\n  },\n  goal: {\n    type: DataType.INTEGER,\n  },\n});\n\nexport default MatchInfo;\n\n\n\n// WEBPACK FOOTER //\n// ./src/data/models/MatchInfo.js","import DataType from 'sequelize';\nimport Model from '../sequelize';\n\nconst MatchGame = Model.define('MatchGame', {\n  id: {\n    type: DataType.UUID,\n    defaultValue: DataType.UUIDV1,\n    primaryKey: true,\n  },\n  match: {\n    type: DataType.UUID,\n    allowNull: false,\n  },\n  player: {\n    type: DataType.UUID,\n    allowNull: false,\n  },\n  game: {\n    type: DataType.CHAR(128),\n    allowNull: false,\n  },\n});\n\nexport default MatchGame;\n\n\n\n// WEBPACK FOOTER //\n// ./src/data/models/MatchGame.js","module.exports = require(\"redis\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"redis\"\n// module id = 63\n// module chunks = 9","/**\n * React Starter Kit (https://www.reactstarterkit.com/)\n *\n * Copyright © 2014-present Kriasoft, LLC. All rights reserved.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.txt file in the root directory of this source tree.\n */\n\n/**\n * Passport.js reference implementation.\n * The database schema used in this sample is available at\n * https://github.com/membership/membership.db/tree/master/postgres\n */\n\nimport passport from 'passport';\nimport { Strategy as WechatStrategy } from 'passport-wechat';\nimport { User, UserLogin, UserClaim, UserProfile } from './data/models';\nimport config from './config';\n\npassport.serializeUser((user, done) => {\n  done(null, user);\n});\n\npassport.deserializeUser((user, done) => {\n  done(null, user);\n});\n\npassport.use(\n  new WechatStrategy(\n    {\n      appID: config.wechat.appId,\n      appSecret: config.wechat.appSecret,\n      callbackURL: 'http://shoutanwq.com/login/wechat/return',\n      client: 'wechat',\n      scope: 'snsapi_userinfo',\n      passReqToCallback: true,\n    },\n    (req, accessToken, refreshToken, profile, expiredIn, done) => {\n      /* eslint-disable no-underscore-dangle */\n      const loginName = 'wechat';\n      const claimType = 'urn:wechat:access_token';\n      const id = profile.unionid || profile.openid;\n      const fooBar = async () => {\n        if (req.user) {\n          const userLogin = await UserLogin.findOne({\n            attributes: ['name', 'key'],\n            where: { name: loginName, key: id },\n          });\n          if (userLogin) {\n            // There is already a Facebook account that belongs to you.\n            // Sign in with that account or delete it, then link it with your current account.\n            done();\n          } else {\n            const user = await User.create(\n              {\n                id: req.user.id,\n                email: `${id}@wechat.account.shoutanwq.com.`,\n                logins: [{ name: loginName, key: id }],\n                claims: [{ type: claimType, value: accessToken }],\n                profile: {\n                  displayName: profile.nickname,\n                  gender: profile.sex,\n                  picture: profile.headimgurl,\n                },\n              },\n              {\n                include: [\n                  { model: UserLogin, as: 'logins' },\n                  { model: UserClaim, as: 'claims' },\n                  { model: UserProfile, as: 'profile' },\n                ],\n              },\n            );\n            done(null, {\n              id: user.id,\n              email: user.email,\n            });\n          }\n        } else {\n          const users = await User.findAll({\n            attributes: ['id', 'email'],\n            where: { '$logins.name$': loginName, '$logins.key$': id },\n            include: [\n              {\n                attributes: ['name', 'key'],\n                model: UserLogin,\n                as: 'logins',\n                required: true,\n              },\n            ],\n          });\n          if (users.length) {\n            const user = users[0].get({ plain: true });\n            done(null, user);\n          } else {\n            let user = await User.findOne({\n              where: { email: `${id}@wechat.account.shoutanwq.com` },\n            });\n            if (user) {\n              // There is already an account using this email address. Sign in to\n              // that account and link it with Facebook manually from Account Settings.\n              done(null);\n            } else {\n              user = await User.create(\n                {\n                  email: `${id}@wechat.account.shoutanwq.com`,\n                  emailConfirmed: true,\n                  logins: [{ name: loginName, key: id }],\n                  claims: [{ type: claimType, value: accessToken }],\n                  profile: {\n                    displayName: profile.nickname,\n                    gender: profile.sex,\n                    picture: profile.headimgurl,\n                  },\n                },\n                {\n                  include: [\n                    { model: UserLogin, as: 'logins' },\n                    { model: UserClaim, as: 'claims' },\n                    { model: UserProfile, as: 'profile' },\n                  ],\n                },\n              );\n              done(null, {\n                id: user.id,\n                email: user.email,\n              });\n            }\n          }\n        }\n      };\n      fooBar().catch(done);\n    },\n  ),\n);\n\nexport default passport;\n\n\n\n// WEBPACK FOOTER //\n// ./src/passport.js","module.exports = require(\"passport\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"passport\"\n// module id = 65\n// module chunks = 9","module.exports = require(\"passport-wechat\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"passport-wechat\"\n// module id = 66\n// module chunks = 9","/**\n * React Starter Kit (https://www.reactstarterkit.com/)\n *\n * Copyright © 2014-present Kriasoft, LLC. All rights reserved.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.txt file in the root directory of this source tree.\n */\n\nimport UniversalRouter from 'universal-router';\nimport querystring from 'querystring';\nimport routes from './routes';\n\nexport default new UniversalRouter(routes, {\n  resolveRoute(context, params) {\n    if (context.route.protected && !context.store.getState().user) {\n      console.info(\n        'return to',\n        `//${context.hostname}${context.pathname}?${querystring.stringify(\n          context.query,\n        )}`,\n      );\n      return {\n        redirect: '//shoutanwq.com/login/wechat',\n        from: `//${context.hostname}${context.pathname}?${querystring.stringify(\n          context.query,\n        )}`,\n      };\n    }\n    if (typeof context.route.load === 'function') {\n      return context.route\n        .load()\n        .then(action => action.default(context, params));\n    }\n    if (typeof context.route.action === 'function') {\n      return context.route.action(context, params);\n    }\n    return undefined;\n  },\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/router.js","module.exports = require(\"universal-router\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"universal-router\"\n// module id = 68\n// module chunks = 9","/**\n * React Starter Kit (https://www.reactstarterkit.com/)\n *\n * Copyright © 2014-present Kriasoft, LLC. All rights reserved.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.txt file in the root directory of this source tree.\n */\n\n/* eslint-disable global-require */\n\n// The top-level (parent) route\nconst routes = {\n  path: '',\n\n  // Keep in mind, routes are evaluated in order\n  children: [\n    {\n      path: '',\n      load: () => import(/* webpackChunkName: 'home' */ './home'),\n    },\n    {\n      path: '/login',\n      load: () => import(/* webpackChunkName: 'login' */ './login'),\n    },\n    {\n      path: '/about',\n      load: () => import(/* webpackChunkName: 'about' */ './about'),\n    },\n    {\n      path: '/admin',\n      load: () => import(/* webpackChunkName: 'admin' */ './admin'),\n    },\n    {\n      path: '/go',\n      protected: true,\n      children: [\n        {\n          path: '/creation',\n          load: () =>\n            import(/* webpackChunkName: 'go-creation' */ './go-creation'),\n        },\n        {\n          path: '',\n          load: () => import(/* webpackChunkName: 'go' */ './go'),\n        },\n      ],\n    },\n    {\n      path: '/match',\n      protected: true,\n      children: [\n        {\n          path: '/creation',\n          load: () =>\n            import(/* webpackChunkName: 'go-creation-match' */ './go-creation-match'),\n        },\n        {\n          path: '',\n          load: () => import(/* webpackChunkName: 'match' */ './match'),\n        },\n      ],\n    },\n    // Wildcard routes, e.g. { path: '(.*)', ... } (must go last)\n    {\n      path: '(.*)',\n      load: () => import(/* webpackChunkName: 'not-found' */ './not-found'),\n    },\n  ],\n\n  async action({ next }) {\n    // Execute each child route until one of them return the result\n    const route = await next();\n\n    // Provide default values for title, description etc.\n    route.title = `${route.title || 'Untitled Page'} - 手谈围棋`;\n    route.description = route.description || '';\n\n    return route;\n  },\n};\n\n// The error page is available by permanent url for development mode\nif (__DEV__) {\n  routes.children.unshift({\n    path: '/error',\n    action: require('./error').default,\n  });\n}\n\nexport default routes;\n\n\n\n// WEBPACK FOOTER //\n// ./src/routes/index.js","/**\n * React Starter Kit (https://www.reactstarterkit.com/)\n *\n * Copyright © 2014-present Kriasoft, LLC. All rights reserved.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.txt file in the root directory of this source tree.\n */\n\nimport {\n  GraphQLSchema as Schema,\n  GraphQLObjectType as ObjectType,\n} from 'graphql';\n\nimport me from './queries/me';\nimport news from './queries/news';\nimport go from './queries/go';\nimport wechat from './queries/wechat';\nimport match from './queries/match';\n\nimport create from './mutations/create';\nimport createMatch from './mutations/createMatch';\nimport update from './mutations/update';\n\nconst schema = new Schema({\n  query: new ObjectType({\n    name: 'Query',\n    fields: {\n      me,\n      go,\n      news,\n      wechat,\n      match,\n    },\n  }),\n  mutation: new ObjectType({\n    name: 'Mutation',\n    fields: {\n      createGo: create,\n      createGoMatch: createMatch,\n      updateGo: update,\n    },\n  }),\n});\n\nexport default schema;\n\n\n\n// WEBPACK FOOTER //\n// ./src/data/schema.js","/**\n * React Starter Kit (https://www.reactstarterkit.com/)\n *\n * Copyright © 2014-present Kriasoft, LLC. All rights reserved.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.txt file in the root directory of this source tree.\n */\n\nimport UserType from '../types/UserType';\n\nconst me = {\n  type: UserType,\n  resolve({ request }) {\n    return (\n      request.user && {\n        id: request.user.id,\n        email: request.user.email,\n      }\n    );\n  },\n};\n\nexport default me;\n\n\n\n// WEBPACK FOOTER //\n// ./src/data/queries/me.js","/**\n * React Starter Kit (https://www.reactstarterkit.com/)\n *\n * Copyright © 2014-present Kriasoft, LLC. All rights reserved.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.txt file in the root directory of this source tree.\n */\n\nimport {\n  GraphQLObjectType as ObjectType,\n  GraphQLID as ID,\n  GraphQLString as StringType,\n  GraphQLNonNull as NonNull,\n} from 'graphql';\n\nconst UserType = new ObjectType({\n  name: 'User',\n  fields: {\n    id: { type: new NonNull(ID) },\n    email: { type: StringType },\n  },\n});\n\nexport default UserType;\n\n\n\n// WEBPACK FOOTER //\n// ./src/data/types/UserType.js","/**\n * React Starter Kit (https://www.reactstarterkit.com/)\n *\n * Copyright © 2014-present Kriasoft, LLC. All rights reserved.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.txt file in the root directory of this source tree.\n */\n\nimport { GraphQLList as List } from 'graphql';\nimport fetch from 'node-fetch';\nimport NewsItemType from '../types/NewsItemType';\n\n// React.js News Feed (RSS)\nconst url =\n  'https://api.rss2json.com/v1/api.json' +\n  '?rss_url=https%3A%2F%2Freactjsnews.com%2Ffeed.xml';\n\nlet items = [];\nlet lastFetchTask;\nlet lastFetchTime = new Date(1970, 0, 1);\n\nconst news = {\n  type: new List(NewsItemType),\n  resolve() {\n    if (lastFetchTask) {\n      return lastFetchTask;\n    }\n\n    if (new Date() - lastFetchTime > 1000 * 60 * 10 /* 10 mins */) {\n      lastFetchTime = new Date();\n      lastFetchTask = fetch(url)\n        .then(response => response.json())\n        .then(data => {\n          if (data.status === 'ok') {\n            items = data.items;\n          }\n\n          lastFetchTask = null;\n          return items;\n        })\n        .catch(err => {\n          lastFetchTask = null;\n          throw err;\n        });\n\n      if (items.length) {\n        return items;\n      }\n\n      return lastFetchTask;\n    }\n\n    return items;\n  },\n};\n\nexport default news;\n\n\n\n// WEBPACK FOOTER //\n// ./src/data/queries/news.js","/**\n * React Starter Kit (https://www.reactstarterkit.com/)\n *\n * Copyright © 2014-present Kriasoft, LLC. All rights reserved.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.txt file in the root directory of this source tree.\n */\n\nimport {\n  GraphQLObjectType as ObjectType,\n  GraphQLString as StringType,\n  GraphQLNonNull as NonNull,\n} from 'graphql';\n\nconst NewsItemType = new ObjectType({\n  name: 'NewsItem',\n  fields: {\n    title: { type: new NonNull(StringType) },\n    link: { type: new NonNull(StringType) },\n    author: { type: StringType },\n    pubDate: { type: new NonNull(StringType) },\n    content: { type: StringType },\n  },\n});\n\nexport default NewsItemType;\n\n\n\n// WEBPACK FOOTER //\n// ./src/data/types/NewsItemType.js","/**\n * @author lookis on 17/01/2018\n */\n\nimport { GraphQLNonNull, GraphQLString } from 'graphql';\nimport GoType from '../types/GoType';\nimport { GoInfo } from '../models';\n\nconst Go = {\n  type: GoType,\n  args: {\n    id: {\n      type: new GraphQLNonNull(GraphQLString),\n    },\n  },\n  resolve(root, { id }) {\n    return GoInfo.findOne({\n      where: {\n        id,\n      },\n    })\n      .then(r => r.get({ plain: true }))\n      .then(go => ({\n        id,\n        engine: go.rule,\n        info: Object.keys(go)\n          .filter(key =>\n            [\n              'boardsize',\n              'handicap',\n              'komi',\n              'black',\n              'white',\n              'goal',\n              'result',\n            ].includes(key),\n          )\n          .reduce((obj, key) => {\n            obj[key] = go[key];\n            return obj;\n          }, {}),\n      }));\n  },\n};\n\nexport default Go;\n\n\n\n// WEBPACK FOOTER //\n// ./src/data/queries/go.js","import fetch from 'node-fetch';\nimport crypto from 'crypto';\nimport querystring from 'querystring';\nimport { GraphQLNonNull, GraphQLString } from 'graphql';\nimport WechatType from '../types/WechatType';\nimport config from '../../config';\nimport { redis } from '../../redis';\n\nconst sign = function(payload) {\n  const algo = crypto.createHash('sha1');\n  const ordered = {};\n  Object.keys(payload)\n    .sort()\n    .forEach(key => {\n      if (payload[key] && key !== 'signature') {\n        ordered[key] = payload[key];\n      }\n    });\n  const stringA = querystring.unescape(querystring.stringify(ordered));\n  algo.update(stringA);\n  return algo.digest('hex');\n};\n\nconst wechat = {\n  type: WechatType,\n  args: {\n    url: { type: new GraphQLNonNull(GraphQLString) },\n  },\n  resolve(root, { url }) {\n    return redis\n      .getAsync('jsapi_ticket')\n      .then(ticket => {\n        if (!ticket) {\n          return redis\n            .getAsync('wechat_accessToken')\n            .then(accessToken => {\n              if (!accessToken) {\n                return fetch(\n                  `https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&appid=${\n                    config.wechat.appId\n                  }&secret=${config.wechat.appSecret}`,\n                )\n                  .then(response => response.json())\n                  .then(json => {\n                    if (!('errcode' in json) || json.errcode === 0) {\n                      return redis\n                        .setexAsync(\n                          'wechat_accessToken',\n                          json.expires_in,\n                          json.access_token,\n                        )\n                        .then(() => json.access_token);\n                    }\n                    throw json;\n                  });\n              }\n              return accessToken;\n            })\n            .then(accessToken =>\n              fetch(\n                `https://api.weixin.qq.com/cgi-bin/ticket/getticket?access_token=${accessToken}&type=jsapi`,\n              )\n                .then(response => response.json())\n                .then(json => {\n                  if ('errcode' in json && json.errcode === 0) {\n                    return redis\n                      .setexAsync('jsapi_ticket', json.expires_in, json.ticket)\n                      .then(() => json.ticket);\n                  }\n                  throw json;\n                }),\n            );\n        }\n        return ticket;\n      })\n      .then(ticket => {\n        const noncestr = Math.random().toString();\n        const timestamp = Math.floor(new Date().getTime() / 1000);\n        const signature = sign({\n          jsapi_ticket: ticket,\n          url,\n          noncestr,\n          timestamp,\n        });\n        return {\n          appId: config.wechat.appId,\n          timestamp,\n          nonceStr: noncestr,\n          signature,\n        };\n      })\n      .catch(e => {\n        console.error(e);\n        const noncestr = Math.random().toString();\n        const timestamp = Math.floor(new Date().getTime() / 1000);\n        return {\n          appId: config.wechat.appId,\n          timestamp,\n          nonceStr: noncestr,\n          signature: e.errmsg || e.errcode || 'error',\n        };\n      });\n  },\n};\n\nexport default wechat;\n\n\n\n// WEBPACK FOOTER //\n// ./src/data/queries/wechat.js","module.exports = require(\"crypto\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"crypto\"\n// module id = 77\n// module chunks = 9","import { GraphQLObjectType, GraphQLString, GraphQLInt } from 'graphql';\n\nconst WechatType = new GraphQLObjectType({\n  name: 'Wechat',\n  fields: {\n    appId: {\n      type: GraphQLString,\n    },\n    timestamp: {\n      type: GraphQLInt,\n    },\n    nonceStr: {\n      type: GraphQLString,\n    },\n    signature: {\n      type: GraphQLString,\n    },\n  },\n});\n\nexport default WechatType;\n\n\n\n// WEBPACK FOOTER //\n// ./src/data/types/WechatType.js","/**\n * @author lookis on 17/01/2018\n */\n\nimport { GraphQLNonNull, GraphQLString } from 'graphql';\nimport GoMatch from '../types/GoMatch';\nimport sequelize from '../sequelize';\nimport { MatchInfo, MatchGame, GoInfo, GoMove } from '../models';\n\nconst Go = {\n  type: GoMatch,\n  args: {\n    id: {\n      type: new GraphQLNonNull(GraphQLString),\n    },\n  },\n  resolve({ request }, { id }) {\n    if (request.user) {\n      const player = request.user.id;\n      // find the one already join\n      return MatchGame.findOne({\n        where: {\n          match: id,\n          player,\n        },\n      })\n        .then(res => (res ? res.get({ plain: true }) : null))\n        .then(r => {\n          if (r) {\n            return {\n              id: r.game,\n            };\n          }\n          // find the one not full\n          return MatchGame.findOne({\n            where: {\n              match: id,\n            },\n            group: ['game'],\n            having: sequelize.literal('count(player) < 2'),\n          })\n            .then(res => (res ? res.get({ plain: true }) : null))\n            .then(r1 => {\n              if (r1) {\n                return MatchGame.create({\n                  match: r1.match,\n                  player,\n                  game: r1.game,\n                }).then(() => ({\n                  id: r1.game,\n                  color: 'white',\n                }));\n              }\n              // create new game\n              return MatchInfo.findOne({\n                where: {\n                  id,\n                },\n              })\n                .then(res => (res ? res.get({ plain: true }) : null))\n                .then(match => {\n                  if (\n                    !match ||\n                    new Date(match.createdAt).getTime() +\n                      match.expiredIn * 1000 <\n                      new Date().getTime()\n                  ) {\n                    return {\n                      id: null,\n                    };\n                  }\n                  // create go game\n                  const goId = Math.random()\n                    .toString(16)\n                    .split('.')[1];\n                  return GoInfo.create(\n                    Object.assign(\n                      {\n                        id: goId,\n                        rule: match.rule,\n                        boardsize: match.boardsize,\n                        handicap: match.handicap,\n                        komi: match.komi,\n                        black: player,\n                      },\n                      match.goal ? { goal: match.goal } : {},\n                    ),\n                  )\n                    .then(() =>\n                      GoMove.create({\n                        id: goId,\n                      }),\n                    )\n                    .then(() => {\n                      MatchGame.create({\n                        match: match.id,\n                        player,\n                        game: goId,\n                      });\n                    })\n                    .then(() => ({\n                      id: goId,\n                      color: 'black',\n                    }));\n                });\n            });\n        });\n    }\n    return {\n      id: null,\n    };\n  },\n};\n\nexport default Go;\n\n\n\n// WEBPACK FOOTER //\n// ./src/data/queries/match.js","import { GraphQLObjectType, GraphQLString } from 'graphql';\n\nconst GoMatch = new GraphQLObjectType({\n  name: 'GoMatch',\n  fields: {\n    id: {\n      type: GraphQLString,\n    },\n    color: {\n      type: GraphQLString,\n    },\n  },\n});\n\nexport default GoMatch;\n\n\n\n// WEBPACK FOOTER //\n// ./src/data/types/GoMatch.js","import {\n  GraphQLString,\n  GraphQLNonNull,\n  GraphQLInt,\n  GraphQLFloat,\n} from 'graphql';\nimport GoType from '../types/GoType';\nimport { GoInfo, GoMove } from '../models';\n\nconst createGo = {\n  type: GoType,\n  args: {\n    rule: { type: new GraphQLNonNull(GraphQLString) },\n    boardsize: {\n      type: new GraphQLNonNull(GraphQLInt),\n    },\n    handicap: {\n      type: new GraphQLNonNull(GraphQLInt),\n    },\n    komi: {\n      type: new GraphQLNonNull(GraphQLFloat),\n    },\n    color: { type: GraphQLString },\n    goal: {\n      type: GraphQLInt,\n    },\n  },\n  resolve: (root, { rule, boardsize, handicap, komi, color, goal }) => {\n    const id = Math.random()\n      .toString(16)\n      .split('.')[1];\n    return GoInfo.create(\n      Object.assign(\n        {\n          id,\n          rule,\n          boardsize,\n          handicap,\n          komi,\n        },\n        color === 'black'\n          ? { black: root.request.user.id }\n          : { white: root.request.user.id },\n        goal ? { goal } : {},\n      ),\n    )\n      .then(() =>\n        GoMove.create({\n          id,\n        }),\n      )\n      .then(() => ({\n        id,\n        engine: rule,\n        info: {\n          boardsize,\n          black: color === 'black' ? root.request.user.id : null,\n          white: color === 'white' ? root.request.user.id : null,\n        },\n      }));\n  },\n};\n\nexport default createGo;\n\n\n\n// WEBPACK FOOTER //\n// ./src/data/mutations/create.js","import {\n  GraphQLString,\n  GraphQLNonNull,\n  GraphQLInt,\n  GraphQLFloat,\n} from 'graphql';\nimport MatchType from '../types/MatchType';\nimport { MatchInfo } from '../models';\n\nconst createMatch = {\n  type: MatchType,\n  args: {\n    rule: { type: new GraphQLNonNull(GraphQLString) },\n    boardsize: {\n      type: new GraphQLNonNull(GraphQLInt),\n    },\n    handicap: {\n      type: new GraphQLNonNull(GraphQLInt),\n    },\n    komi: {\n      type: new GraphQLNonNull(GraphQLFloat),\n    },\n    expiredIn: {\n      type: new GraphQLNonNull(GraphQLInt),\n    },\n    goal: {\n      type: GraphQLInt,\n    },\n  },\n  resolve: (root, { rule, boardsize, handicap, komi, expiredIn, goal }) => {\n    const id = Math.random()\n      .toString(16)\n      .split('.')[1];\n    return MatchInfo.create(\n      Object.assign(\n        {\n          id,\n          rule,\n          boardsize,\n          handicap,\n          komi,\n          expiredIn,\n        },\n        goal ? { goal } : {},\n      ),\n    ).then(() => ({\n      id,\n      engine: rule,\n      info: {\n        boardsize,\n      },\n    }));\n  },\n};\n\nexport default createMatch;\n\n\n\n// WEBPACK FOOTER //\n// ./src/data/mutations/createMatch.js","import {\n  GraphQLInt,\n  GraphQLNonNull,\n  GraphQLObjectType,\n  GraphQLString,\n} from 'graphql';\n\nconst MatchType = new GraphQLObjectType({\n  name: 'Match',\n  fields: {\n    id: {\n      type: new GraphQLNonNull(GraphQLString),\n    },\n    engine: {\n      type: new GraphQLNonNull(GraphQLString),\n    },\n    info: {\n      type: new GraphQLObjectType({\n        name: 'MatchInfo',\n        fields: {\n          boardsize: {\n            type: new GraphQLNonNull(GraphQLInt),\n          },\n          goal: {\n            type: GraphQLInt,\n          },\n        },\n      }),\n    },\n  },\n});\n\nexport default MatchType;\n\n\n\n// WEBPACK FOOTER //\n// ./src/data/types/MatchType.js","import { GraphQLString, GraphQLNonNull } from 'graphql';\nimport GoType from '../types/GoType';\nimport { User, UserProfile, GoInfo, GoMove } from '../models';\nimport { redis } from '../../redis';\n\nconst updateGo = {\n  type: GoType,\n  args: {\n    id: { type: new GraphQLNonNull(GraphQLString) },\n    color: { type: GraphQLString },\n  },\n  resolve: (root, { id, color }) =>\n    GoInfo.findOne({\n      where: {\n        id,\n      },\n    })\n      .then(goInfo => {\n        if (\n          goInfo[color] === null &&\n          root.request.user &&\n          goInfo.black !== root.request.user.id &&\n          goInfo.white !== root.request.user.id\n        ) {\n          return GoInfo.update(\n            {\n              [color]: root.request.user.id,\n            },\n            {\n              where: {\n                id,\n              },\n            },\n          );\n        }\n        return Promise.resolve(true);\n      })\n      // publish join\n      .then(() =>\n        Promise.all([\n          GoInfo.findOne({\n            where: {\n              id,\n            },\n          }).then(r => r.get({ plain: true })),\n          GoMove.findOne({\n            where: {\n              id,\n            },\n          }).then(goMove => goMove.move),\n        ]).then(([info, moves]) =>\n          User.findAll({\n            where: { id: { $in: [info.black, info.white] } },\n            include: [\n              {\n                attributes: ['displayName', 'picture'],\n                model: UserProfile,\n                as: 'profile',\n                required: true,\n              },\n            ],\n          }).then(users => {\n            const players = users.filter(e => e).map(user => {\n              const u = user.get({ plain: true });\n              return {\n                id: u.id,\n                displayName: u.profile.displayName,\n                picture: u.profile.picture,\n              };\n            });\n            let profile = {};\n            // eslint-disable-next-line no-restricted-syntax\n            for (const player of players) {\n              profile = Object.assign(profile, {\n                [player.id]: player,\n              });\n            }\n            return redis\n              .publishAsync(\n                `channel:${id}`,\n                JSON.stringify({\n                  code: 'ok',\n                  type: 'init',\n                  game: {\n                    engine: info.rule,\n                    moves: moves.map(JSON.parse),\n                    info: {\n                      result: info.result,\n                      boardsize: info.boardsize,\n                      black: {\n                        id: info.black,\n                        name: profile[info.black]\n                          ? profile[info.black].displayName\n                          : '[黑棋]',\n                        avatar: profile[info.black]\n                          ? profile[info.black].picture\n                          : 'http://wx.qlogo.cn/mmopen/jj4e65x0Px2ibxI8cBsLdxueOibCLrqHvg9U91Dvk0ohjQHgO2dias3LiaHazszmh0CJX4xhknnfwibqwDwWfCBaVPslgIcyBG81A/64',\n                      },\n                      white: {\n                        id: info.white,\n                        name: profile[info.white]\n                          ? profile[info.white].displayName\n                          : '[白棋]',\n                        avatar: profile[info.white]\n                          ? profile[info.white].picture\n                          : 'http://wx.qlogo.cn/mmopen/jj4e65x0Px2ibxI8cBsLdxueOibCLrqHvg9U91Dvk0ohjQHgO2dias3LiaHazszmh0CJX4xhknnfwibqwDwWfCBaVPslgIcyBG81A/64',\n                      },\n                      goal: info.goal,\n                    },\n                  },\n                }),\n              )\n              .then(() =>\n                Promise.resolve([\n                  info.rule,\n                  Object.keys(info)\n                    .filter(key =>\n                      [\n                        'boardsize',\n                        'handicap',\n                        'komi',\n                        'black',\n                        'white',\n                        'goal',\n                        'result',\n                      ].includes(key),\n                    )\n                    .reduce((obj, key) => {\n                      obj[key] = info[key];\n                      return obj;\n                    }, {}),\n                ]),\n              );\n          }),\n        ),\n      )\n      // return info\n      .then(([engine, info]) => ({\n        id,\n        engine,\n        info,\n      })),\n};\n\nexport default updateGo;\n\n\n\n// WEBPACK FOOTER //\n// ./src/data/mutations/update.js","module.exports = require(\"./assets.json\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"./assets.json\"\n// module id = 85\n// module chunks = 9","import { createStore, applyMiddleware, compose } from 'redux';\nimport createRootReducer from '../reducers';\nimport createLogger from './logger';\n\nexport default function configureStore(initialState) {\n  const middleware = [];\n\n  let enhancer;\n\n  if (__DEV__) {\n    middleware.push(createLogger());\n\n    // https://github.com/zalmoxisus/redux-devtools-extension#redux-devtools-extension\n    let devToolsExtension = f => f;\n    if (process.env.BROWSER && window.devToolsExtension) {\n      devToolsExtension = window.devToolsExtension();\n    }\n\n    enhancer = compose(applyMiddleware(...middleware), devToolsExtension);\n  } else {\n    enhancer = applyMiddleware(...middleware);\n  }\n\n  const rootReducer = createRootReducer();\n\n  // See https://github.com/rackt/redux/releases/tag/v3.1.0\n  const store = createStore(rootReducer, initialState, enhancer);\n\n  // Hot reload reducers (requires Webpack or Browserify HMR to be enabled)\n  if (__DEV__ && module.hot) {\n    module.hot.accept('../reducers', () =>\n      // eslint-disable-next-line global-require\n      store.replaceReducer(require('../reducers').default),\n    );\n  }\n\n  return store;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/configureStore.js","import { combineReducers } from 'redux';\nimport user from './user';\nimport runtime from './runtime';\n\nexport default function createRootReducer() {\n  return combineReducers({\n    user,\n    runtime,\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/reducers/index.js","export default function user(state = {}, action) {\n  switch (action.type) {\n    default:\n      return state;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/reducers/user.js","import { SET_RUNTIME_VARIABLE } from '../constants';\n\nexport default function runtime(state = {}, action) {\n  switch (action.type) {\n    case SET_RUNTIME_VARIABLE:\n      return {\n        ...state,\n        [action.payload.name]: action.payload.value,\n      };\n    default:\n      return state;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/reducers/runtime.js","import { inspect } from 'util';\n\nfunction inspectObject(object) {\n  return inspect(object, {\n    colors: true,\n  });\n}\n\nfunction singleLine(str) {\n  return str.replace(/\\s+/g, ' ');\n}\n\nconst actionFormatters = {\n  // This is used at feature/apollo branch, but it can help you when implementing Apollo\n  APOLLO_QUERY_INIT: a =>\n    `queryId:${a.queryId} variables:${inspectObject(\n      a.variables,\n    )}\\n   ${singleLine(a.queryString)}`,\n\n  APOLLO_QUERY_RESULT: a =>\n    `queryId:${a.queryId}\\n   ${singleLine(inspectObject(a.result))}`,\n\n  APOLLO_QUERY_STOP: a => `queryId:${a.queryId}`,\n};\n\n// Server side redux action logger\nexport default function createLogger() {\n  // eslint-disable-next-line no-unused-vars\n  return store => next => action => {\n    let formattedPayload = '';\n    const actionFormatter = actionFormatters[action.type];\n    if (typeof actionFormatter === 'function') {\n      formattedPayload = actionFormatter(action);\n    } else if (action.toString !== Object.prototype.toString) {\n      formattedPayload = action.toString();\n    } else if (typeof action.payload !== 'undefined') {\n      formattedPayload = inspectObject(action.payload);\n    } else {\n      formattedPayload = inspectObject(action);\n    }\n\n    console.log(` * ${action.type}: ${formattedPayload}`); // eslint-disable-line no-console\n    return next(action);\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/logger/logger.server.js","module.exports = require(\"util\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"util\"\n// module id = 91\n// module chunks = 9","/* eslint-disable import/prefer-default-export */\n\nimport { SET_RUNTIME_VARIABLE } from '../constants';\n\nexport function setRuntimeVariable({ name, value }) {\n  return {\n    type: SET_RUNTIME_VARIABLE,\n    payload: {\n      name,\n      value,\n    },\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/actions/runtime.js","module.exports = require(\"classnames/bind\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"classnames/bind\"\n// module id = 93\n// module chunks = 9","module.exports = require(\"sweetalert2\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"sweetalert2\"\n// module id = 94\n// module chunks = 9","module.exports = require(\"material-ui/SelectField\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"material-ui/SelectField\"\n// module id = 95\n// module chunks = 9","module.exports = require(\"material-ui/MenuItem\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"material-ui/MenuItem\"\n// module id = 96\n// module chunks = 9","module.exports = require(\"material-ui/TextField\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"material-ui/TextField\"\n// module id = 97\n// module chunks = 9","module.exports = require(\"material-ui/RaisedButton\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"material-ui/RaisedButton\"\n// module id = 98\n// module chunks = 9","module.exports = require(\"react-websocket\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react-websocket\"\n// module id = 105\n// module chunks = 9","module.exports = require(\"react-rangeslider\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react-rangeslider\"\n// module id = 106\n// module chunks = 9"],"sourceRoot":""}